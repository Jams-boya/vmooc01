<div class="container-fluid" id="container" style="width:100%;padding:0px">
  <div id="advertisement" class="carousel slide" style="height: 400px;width: 100%;">
    <!-- 轮播（Carousel）指标 -->
    <ol class="carousel-indicators">
      {{#ifLength pics.length}} {{#each pics}}
      <li data-target="#advertisement" style="height:16px;width:16px;" data-slide-to="{{@index}}" class="{{hbhActive @index 0}}"></li>
      {{/each}} {{/ifLength}}
    </ol>
    <!-- 轮播（Carousel）项目 -->
    <div class="carousel-inner">
      {{#each pics}}
      <div class="item {{hbhActive @index 0}}">
        <a {{#if clickUrl}} target="_blank" {{/if}} href={{clickUrl clickUrl}}>
          <img src="{{url}}" style="height:400px;width:100%;object-fit: cover;background-color: {{color}}" alt="First slide">
        </a>
      </div>
      {{/each}}
    </div>
  </div>
  <div class="course" style="width:1000px;margin-top:80px;">
    <div class="main">
        
      <div class="title" style="margin-top: 60px;">专题课程</div>
      <div id="topicIntro" class="carousel slide" style="height: 240px;width: 100%;margin-top:45px;">
        <!-- 轮播（Carousel）项目 -->
        <div class="carousel-inner">
        </div>
        <!-- 轮播（Carousel）导航 -->
        <div class="carousel-toggle" style="height:240px;width:80px;position:absolute;left:-80px;top:0px;text-align: center;">
          <a style="margin-left:10px;margin-top:75px;display:block;width:50px;height:101px;color: #393939;text-decoration:none;" href="#topicIntro"
            data-slide="prev">
            <img style="height: 101px;width:50px-moz-transform:scaleX(-1);-webkit-transform:scaleX(-1);-o-transform:scaleX(-1);transform:scaleX(-1);filter:FlipH;"
              src="img/home/right.png" />
          </a>
        </div>
        <div class="carousel-toggle" style="height: 240px;width: 80px;position: absolute;right: -80px;top: 0px;text-align: center;">
          <a style="margin-left:20px;margin-top:75px;display:block;width:50px;height:101px;color: #393939;text-decoration:none" href="#topicIntro"
            data-slide="next">
            <img style="height:101px;width:50px;" src="img/home/right.png" />
          </a>
        </div>
      </div>
      <div class="title" style="margin-top: 68px;">好课推荐</div>
      <div class="row1 row" style="margin-top:45px;">
        {{#each courses}}
        <div class="col-xs-4 col-xs-4 col-md-4 col-lg-4 hvr-grow" style="margin-bottom:60px;">
          <a href="/course/{{_id}}" target="_blank">
            <img class="pic" src={{cover}} style="width:300px;height:180px;" alt="" />
            <div class="courseInfo" style="position:absolute;font-family:'KaiTi';width:280px;margin-left:15px;margin-right:15px;top:55px;text-align:center;color:black;font-size:24px;font-weight: 400;">
              <p>{{name}}</p>
              <p style="font-size:20px;margin-top:10px;">讲师：{{teacherName}}</p>
            </div>
          </a>
        </div>
        {{/each}}
      </div>
      <div class="title" style="margin-top: 10px;">合作讲师</div>
      <div class="teacher" style="height:300px;margin-top: 40px;">
        {{#each experts}}
        <div class="tea hvr-grow">
          <a href="/expert/{{userId}}" target="_blank">
            <div class="shadow" style="position:absolute;left:7px;z-index:-1;width:192px;height:192px;"></div>
            <img class="pic" style="height:192px;width:192px;box-shadow:3px 4px 5px lightgrey;" src='{{lifePhoto}}' href="" />
            <div class="tea1" style="width:192px;left:6px;"></div>
            <div class="tea2" style="font-size:14px;">
              <span class="name" style="margin-left:10px;">{{name}}</span>
              <span class="job" style="margin-right:5px;font-size: 12px;">{{professionalTitle}}</span>
            </div>
          </a>
        </div>
        {{/each}}
        <div class="tea hvr-grow">
          <a href="/teachersign/steps/" target="_blank" style="text-decoration: none;color:white;height:184px;width:184px;">
            <div class="shadow" style="position:absolute;left:7px;z-index:-1;width:192px;height:192px;box-shadow:2px 2px 1px 2px lightgrey;"></div>
            <img class="pic" src="img/more.png" style="height:192px;width:192px;box-shadow:3px 4px 5px lightgrey;" alt="" />
            <p class="text" style="position:absolute;left:50px;top:75px;color:white;font-size:20px;font-weight: bold;">
              +申请合作
            </p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /page content -->
{{#section 'appjs'}}
<script src="/home/bundle.js"></script>
<script>
    //专题推荐位数据填充
    var collections = {{{jstringfiy collections}}};
    var $topicIntro = $("#topicIntro .carousel-inner");

    collections.map(function(collection, idx) {
        if (collection.state == 2) {
            collection = {_id: false, name:"暂无", cover:"/img/courseManage/sp3.png"};
        }
    }) 

    if (collections.length % 2 == 1) {
        collections.push({_id:false, name:"暂无", cover:"/img/courseManage/sp3.png"});
    } else if (collections.length == 0) {
        collections.push({_id:false, name:"暂无", cover:"/img/courseManage/sp3.png"});
        collections.push({_id:false, name:"暂无", cover:"/img/courseManage/sp3.png"});
    }

    if (collections.length == 2) {
        $(".carousel-toggle").hide();
    }
    

    collections.map(function(collection, idx) {
        if (idx % 2 == 0) {
            var _img = '<img src="' + collection.cover +'" style="height:240px;width:490px;float:left;">';
            var _name = '<p class="0" style="position:absolute;z-index:9999;padding-top:100px;height:240px;width:490px;text-align:center;font-size:24px;">' + collection.name + '</p>';
            var _str = idx == 0 ? '<div class="item active">' : '<div class="item">';
            $topicIntro.append(_str);
            if (!collection._id) {
                $("#topicIntro .item").eq((idx)/2).append('<div class="hvr-shrink">'+_img+_name+'</div>');
            } else {
                $("#topicIntro .item").eq(idx/2).append('<div class="hvr-shrink">'+_img+"<a target='_blank' href='/special/"+ collection._id +"'>"+_name+"</a></div>");
            }

        } else {
            var _img = '<img src="' + collection.cover +'" style="height:240px;width:490px;float:right;">';
            var _name = '<p class="1" style="position:absolute;padding-top:100px;height:240px;width:490px;text-align:center;font-size:24px;">' + collection.name + '</p>';

            if (!collection._id) {
                $("#topicIntro .item").eq((idx-1)/2).append('<div class="hvr-shrink">'+_img+_name +'</div>');
            } else {
                $("#topicIntro .item").eq((idx-1)/2).append('<div class="hvr-shrink">'+_img+"<a target='_blank' href='/special/"+ collection._id +"'>"+_name+"</a></div>");
            }
        }

    });



    //窗口大小自适应
    var winWidth;                                             //浏览器窗口宽度
    if (window.innerWidth)
        winWidth = window.innerWidth;
    else if ((document.body) && (document.body.clientWidth))
        winWidth = document.body.clientWidth;
    $(".course").css('margin-left', (winWidth - 1000)/2);
    $("#container").slideDown();

    //窗口大小变化时自适应
    $(window).resize(function() {
        if (window.innerWidth)
            winWidth = window.innerWidth;
        else if ((document.body) && (document.body.clientWidth))
            winWidth = document.body.clientWidth;
        $(".course").css('margin-left', (winWidth - 1000)/2);
    });
</script> {{/section}} {{#section 'appcss'}}
<link rel="stylesheet" href="/home/bundle.css">
<link rel="stylesheet" type="text/css" href="css/course.css"> {{/section}}