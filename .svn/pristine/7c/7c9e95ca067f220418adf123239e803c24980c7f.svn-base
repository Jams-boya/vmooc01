<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="aplus-rate-ahot" content="0.5">
  <meta name="aplus-rate-ahot-res" content="0.5">
  <meta name="data-spm" content="5176">

  <title>{{title}}</title>
  <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/layouts/public_layout/bundle.css"> {{{_sections.appcss}}}
</head>

<body>
  <div view-framework="">
    <div class="viewFramework-topbar">
      <div class="aliyun-console-topbar">
        <div class="topbar-wrap topbar-clearfix">
          <div class="topbar-head topbar-left">
            <a href="/" class="topbar-logo topbar-left">
              <!--<img src="/view/{{company.logo}}" height="50" width="50" />-->
            </a>
            <a href="/" target="_self" class="topbar-home-link topbar-btn topbar-left">
              <span>{{user.companyName}}</span>
            </a>
          </div>
          <div class="topbar-info topbar-right topbar-clearfix">

            <div class="topbar-left topbar-assist topbar-info-item">
              <a href="javascript:;" class="topbar-btn ng-binding">帮助与文档</a>
            </div>

            <div class="topbar-left topbar-user">
              <div class="dropdown topbar-info-item" dropdown="">
                <a href="#" class="dropdown-toggle topbar-btn" data-toggle="dropdown">
                  <span>{{user.name}}</span> <i class="fa fa-caret-down" aria-hidden="false"></i>
                </a>
                <ul class="dropdown-menu">
                  <!--<li class="topbar-info-btn">
                    <a href="/profile" role="menuitem" target="_self">
                      <span class="ng-binding">个人设置</span>
                    </a>
                  </li>-->
                  <li class="topbar-info-btn">
                    <a href="/signout" role="menuitem" target="_self">
                      <span class="ng-binding">退出</span>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="viewFramework-body viewFramework-sidebar-full">
      <div class="viewFramework-sidebar">
        <!-- sidebar -->
        <div class="sidebar-inner">
          <div class="sidebar-fold icon-fold">
            <i class="fa fa-align-justify fw"></i>
          </div>
          <div class="sidebar-nav main-nav">
            <ul class="sidebar-trans" style="height: 500px;">
              {{#each user.cmsModule}}
              <li class="nav-item {{hbhActive groupCode ../groupCode}}">
                <a href="{{modules.0.url}}" data-original-title="{{groupName}}" class="sidebar-trans" data-toggle="tooltip" data-placement="right"
                  title="">
                  <div class="nav-icon sidebar-trans">
                    <i class="{{groupCss}}" aria-hidden="true"></i>
                  </div>
                  <span class="nav-title ng-binding">{{groupName}}</span>
                </a>
              </li>
              {{/each}}
            </ul>

          </div>
        </div>
        <!-- /sidebar -->
      </div>

      <div class="viewFramework-product {{subrights groupCode user.cmsModule}}" role="main">
        <div class="viewFramework-product-navbar">
          <div bindonce="" class="product-nav-stage ng-scope product-nav-stage-main">
            <div class="product-nav-scene product-nav-main-scene">
              {{#each user.cmsModule}} {{#ifEqual groupCode ../groupCode}}
              <div class="product-nav-title ng-binding" id="nav-title">{{groupName}}</div>
              {{/ifEqual}} {{/each}}
              <div class="product-nav-list">
                <ul role="tree" aria-labelledby="nav-title">
                  {{#each user.cmsModule}} {{#ifEqual groupCode ../groupCode}} {{#each modules}}
                  <li class="{{hbhActive moduleCode ../../moduleCode}}">
                    <div>
                      <a href="{{url}}" role="treeitem">
                        <div class="nav-icon"></div>
                        <div class="nav-title">{{moduleName}}</div>
                      </a>
                    </div>
                  </li>
                  {{/each}} {{/ifEqual}} {{/each}}
                </ul>
              </div>
            </div>
          </div>
          <!--/product-navbar -->
        </div>

        <div class="viewFramework-product-navbar-collapse" style="display:{{collapse groupCode user.cmsModule}}">
          <div class="product-navbar-collapse-inner">
            <div class="product-navbar-collapse-bg"></div>
            <div class="product-navbar-collapse">
              <span class="icon-collapse-left">
                  <i class="fa fa-angle-double-left" aria-hidden="true"></i>
                </span>
              <span class="icon-collapse-right">
                  <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                </span>
            </div>
          </div>
        </div>

        <div class="viewFramework-product-body">
          <!-- body -->
          <div class="console-container">
            <div class="row">
              <div class="col-sm-12">{{{body}}}</div>
            </div>
          </div>
          <!-- /body -->
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    var rights = {{{jstringfiy user.cmsModule}}};
    {{#if user}}
      var guser = {{{jstringfiy user}}}
    {{/if}}
    // var onecompany = {{{jstringfiy company}}};
    function checkOperationRights (code) {
      for (var i = 0; i < rights.length; i++) {
        var right = rights[i];

        for (var j = 0; j < right.modules.length; j++) {
          var module = right.modules[j];

          for (var k = 0; k < module.operations.length; k++) {
            var o = module.operations[k];
            if(o === code) {
              return true;
            }
          }
        }
      }
      return false;
    }

    function checkFellow (code) {
      for (var i = 0; i < rights.length; i++) {
        var right = rights[i];
        for (var j = 0; j < right.modules.length; j++) {
          var module = right.modules[j];
          if(module.moduleCode == code) {
            return {
              view: module.viewFellowData,
              edit: module.editFellowData
            };
          }
        }
      }
      return {view:false, edit:false};
    }
    </script>
  <script src="/vendor.dll.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="//cdn.bootcss.com/babel-polyfill/6.23.0/polyfill.min.js"></script>
  <script>
      var socket=io('/', { transports: ['websocket', 'polling'] });
      socket.emit('foo', 'hello');
      socket.on('test', function(data) {
        console.log(data);
      });
      socket.on('disconnect', function() {
        console.log("1111");
      })
    </script>
  <script src="/layouts/public_layout_cms/bundle.js"></script> {{{_sections.appjs}}} {{{_sections.globlecontent}}}
</body>

</html>